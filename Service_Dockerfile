FROM python:3.10-slim

ARG service

WORKDIR /project
RUN pip install poetry
COPY wait-for-it.sh .
COPY pyproject.toml poetry.lock ./
RUN poetry install
COPY lightshield/templates/ lightshield/templates/
COPY lightshield/*.py lightshield/
COPY lightshield/services/$service/ lightshield/services/$service/
COPY lightshield/cli_commands/ lightshield/cli_commands/
